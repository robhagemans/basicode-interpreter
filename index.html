<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Online BASICODE interpreter: run BASICODE programs directly in your browser" />
    <meta name="keywords" content="basicode, basic, interpreter, emulator, javascript, 8bit, retrocomputing, c64, zx-spectrum, bbc, trs-80, msx" />
    <link rel="stylesheet" href="app.css">
    <script src="basicode.js"></script>
    <script src="app.js"></script>
    <script src="export.js"></script>
    <title>BASICODE in the browser</title>
</head>

<body onload="setup();">

    <div id="screen">
        <h1>BASICODE in the browser</h1>
        <div id="screen-wrapper">
            <div>
                <script type="text/basicode" id="basicode-script"></script>
            </div>
        </div>
        <div class="buttons">
            <button onclick="run();" id="button0">&#9654;</button>
            <button onclick="exportAsWav();" id="exportButton">Export as WAV file</button>
        </div>
    </div>

    <div class="tabs">

        <div id="keyboard">
            <a class="tab" href="#keyboard">Keyboard</a>
            <div>
                <div class="keyboard">
                    <button onclick="pressKey(this);" class="fill">Esc</button>
                    <button onclick="pressKey(this);">F1</button>
                    <button onclick="pressKey(this);">F2</button>
                    <button onclick="pressKey(this);">F3</button>
                    <button onclick="pressKey(this);">F4</button>
                    <button onclick="pressKey(this);">F5</button>
                    <button onclick="pressKey(this);">F6</button>
                    <button onclick="pressKey(this);">F7</button>
                    <button onclick="pressKey(this);">F8</button>
                    <button onclick="pressKey(this);">F9</button>
                    <button onclick="pressKey(this);">F10</button>
                    <button onclick="pressKey(this);">F11</button>
                    <button onclick="pressKey(this);">F12</button>
                    <button onclick="pressKey(this);" class="fill">Brk</button>
                </div>
                <div class="keyboard">
                    <button onclick="pressKey(this);"><span class="unshift">`</span><span class="shift">~</span></button>
                    <button onclick="pressKey(this);"><span class="unshift">1</span><span class="shift">!</span></button>
                    <button onclick="pressKey(this);"><span class="unshift">2</span><span class="shift">@</span></button>
                    <button onclick="pressKey(this);"><span class="unshift">3</span><span class="shift">#</span></button>
                    <button onclick="pressKey(this);"><span class="unshift">4</span><span class="shift">$</span></button>
                    <button onclick="pressKey(this);"><span class="unshift">5</span><span class="shift">%</span></button>
                    <button onclick="pressKey(this);"><span class="unshift">6</span><span class="shift">^</span></button>
                    <button onclick="pressKey(this);"><span class="unshift">7</span><span class="shift">&amp;</span></button>
                    <button onclick="pressKey(this);"><span class="unshift">8</span><span class="shift">*</span></button>
                    <button onclick="pressKey(this);"><span class="unshift">9</span><span class="shift">(</span></button>
                    <button onclick="pressKey(this);"><span class="unshift">0</span><span class="shift">)</span></button>
                    <button onclick="pressKey(this);"><span class="unshift">-</span><span class="shift">_</span></button>
                    <button onclick="pressKey(this);"><span class="unshift">=</span><span class="shift">+</span></button>
                    <button onclick="pressKey(this);" class="wide">Del</button>
                </div>
                <div class="keyboard">
                    <button onclick="pressKey(this);" class="wide">Tab</button>
                    <button onclick="pressKey(this);"><span class="unshift letter">q</span><span class="shift letter">Q</span></button>
                    <button onclick="pressKey(this);"><span class="unshift letter">w</span><span class="shift letter">W</span></button>
                    <button onclick="pressKey(this);"><span class="unshift letter">e</span><span class="shift letter">E</span></button>
                    <button onclick="pressKey(this);"><span class="unshift letter">r</span><span class="shift letter">R</span></button>
                    <button onclick="pressKey(this);"><span class="unshift letter">t</span><span class="shift letter">T</span></button>
                    <button onclick="pressKey(this);"><span class="unshift letter">y</span><span class="shift letter">Y</span></button>
                    <button onclick="pressKey(this);"><span class="unshift letter">u</span><span class="shift letter">U</span></button>
                    <button onclick="pressKey(this);"><span class="unshift letter">i</span><span class="shift letter">I</span></button>
                    <button onclick="pressKey(this);"><span class="unshift letter">o</span><span class="shift letter">O</span></button>
                    <button onclick="pressKey(this);"><span class="unshift letter">p</span><span class="shift letter">P</span></button>
                    <button onclick="pressKey(this);"><span class="unshift">[</span><span class="shift">{</span></button>
                    <button onclick="pressKey(this);"><span class="unshift">]</span><span class="shift">}</span></button>
                    <button onclick="pressKey(this);"><span class="unshift">\</span><span class="shift">|</span></button>
                </div>
                <div class="keyboard">
                    <button onclick="pressKey(this);" class="wide capskey">Caps</button>
                    <button onclick="pressKey(this);"><span class="unshift letter">a</span><span class="shift letter">A</span></button>
                    <button onclick="pressKey(this);"><span class="unshift letter">s</span><span class="shift letter">S</span></button>
                    <button onclick="pressKey(this);"><span class="unshift letter">d</span><span class="shift letter">D</span></button>
                    <button onclick="pressKey(this);"><span class="unshift letter">f</span><span class="shift letter">F</span></button>
                    <button onclick="pressKey(this);"><span class="unshift letter">g</span><span class="shift letter">G</span></button>
                    <button onclick="pressKey(this);"><span class="unshift letter">h</span><span class="shift letter">H</span></button>
                    <button onclick="pressKey(this);"><span class="unshift letter">j</span><span class="shift letter">J</span></button>
                    <button onclick="pressKey(this);"><span class="unshift letter">k</span><span class="shift letter">K</span></button>
                    <button onclick="pressKey(this);"><span class="unshift letter">l</span><span class="shift letter">L</span></button>
                    <button onclick="pressKey(this);"><span class="unshift">;</span><span class="shift">:</span></button>
                    <button onclick="pressKey(this);"><span class="unshift">'</span><span class="shift">"</span></button>
                    <button onclick="pressKey(this);" class="double">Enter</button>
                </div>
                <div class="keyboard">
                    <button onclick="pressKey(this);" class="widedouble shiftkey">Shift</button>
                    <button onclick="pressKey(this);"><span class="unshift letter">z</span><span class="shift letter">Z</span></button>
                    <button onclick="pressKey(this);"><span class="unshift letter">x</span><span class="shift letter">X</span></button>
                    <button onclick="pressKey(this);"><span class="unshift letter">c</span><span class="shift letter">C</span></button>
                    <button onclick="pressKey(this);"><span class="unshift letter">v</span><span class="shift letter">V</span></button>
                    <button onclick="pressKey(this);"><span class="unshift letter">b</span><span class="shift letter">B</span></button>
                    <button onclick="pressKey(this);"><span class="unshift letter">n</span><span class="shift letter">N</span></button>
                    <button onclick="pressKey(this);"><span class="unshift letter">m</span><span class="shift letter">M</span></button>
                    <button onclick="pressKey(this);"><span class="unshift">,</span><span class="shift">&lt;</span></button>
                    <button onclick="pressKey(this);"><span class="unshift">.</span><span class="shift">&gt;</span></button>
                    <button onclick="pressKey(this);"><span class="unshift">/</span><span class="shift">?</span></button>
                    <button onclick="pressKey(this);" class="widedouble shiftkey">Shift</button>
                </div>
                <div class="keyboard">
                    <button onclick="pressKey(this);">&larr;</button>
                    <button onclick="pressKey(this);">&rarr;</button>
                    <button onclick="pressKey(this);" class="bar"> </button>
                    <button onclick="pressKey(this);">&uarr;</button>
                    <button onclick="pressKey(this);">&darr;</button>
                </div>
            </div>
        </div>

        <div id="settings">
            <a class="tab" href="#settings">Settings</a>
            <div>
                <form onchange="updateSettings();">
                    <fieldset>
                        <legend>Colours</legend>
                        <table class="color">
                            <tr>
                                <td></td>
                                <th colspan="3">Background / 0</th>
                                <th colspan="3">Foreground / 7</th>
                            </tr>
                            <tr>
                                <th align="right">Basicode 2 &amp; 3</th>
                                <td colspan="3"><input type="color" id="color-0" value="#000000" class="color" onchange="updateSettings();"></td>
                                <td colspan="3"><input type="color" id="color-7" value="#ffffff" class="color" onchange="updateSettings();"></td>
                            </tr>
                            <tr>
                                <th align="right">Basicode 3C</th>
                                <td><input type="color" id="color-1" value="#0000aa" class="color" onchange="updateSettings();"></td>
                                <td><input type="color" id="color-2" value="#aa0000" class="color" onchange="updateSettings();"></td>
                                <td><input type="color" id="color-3" value="#aa00aa" class="color" onchange="updateSettings();"></td>
                                <td><input type="color" id="color-4" value="#00aa00" class="color" onchange="updateSettings();"></td>
                                <td><input type="color" id="color-5" value="#00aaaa" class="color" onchange="updateSettings();"></td>
                                <td><input type="color" id="color-6" value="#ffff55" class="color" onchange="updateSettings();"></td>
                            </tr>
                            <tr>
                                <td></td>
                                <th>1</th>
                                <th>2</th>
                                <th>3</th>
                                <th>4</th>
                                <th>5</th>
                                <th>6</th>
                            </tr>
                        </table>
                    </fieldset>
                    <fieldset>
                        <legend>Size</legend>
                            <input type="number" id="columns" value=40 min=20 max=400> columns by
                            <input type="number" id="rows" value=24 min=15 max=300> rows
                    </fieldset>
                    <fieldset>
                        <legend>Font</legend>
                        <select name="font" size="10" id="font">
                            <option value="smooth">Browser's native monospace</option>
                            <option value="tiny">A very small bitmap</option>
                            <option value="apple">Apple-II</option>
                            <option value="msx">MSX</option>
                            <option value="atari">Atari 8-bit</option>
                            <option value="bbc">Acorn BBC Micro</option>
                            <option value="c64">Commodore 64</option>
                            <option value="cpc">Amstrad/Schneider CPC</option>
                            <option value="exidy">Exidy Sorcerer</option>
                            <option value="genie1">EACA Colour Genie 1st</option>
                            <option value="genie2">EACA Colour Genie 2nd</option>
                            <option value="kc85">Robotron KC85/1</option>
                            <option value="pcw">Amstrad PCW/Schneider JOYCE</option>
                            <option value="spectrum">Sinclair ZX Spectrum</option>
                            <option value="vic">Commodore PET and VIC-20</option>
                            <option value="cga" selected>IBM CGA</option>
                            <option value="thin">IBM CGA thin stroke</option>
                            <option value="pcjr">IBM PCjr</option>
                            <option value="tandy">Tandy 1000</option>
                            <option value="tandy2">Tandy 1000 font, later version
                            <option value="p2000">Philips P2000T</option>
                            <option value="coco">Tandy TRS-80 CoCo v1&amp;2</option>
                            <option value="coco3">Tandy TRS-80 CoCo v3</option>
                            <option value="mpf">Multitech Micro-Professor MPF-I</option>
                            <option value="ega">IBM EGA</option>
                            <option value="mda">Hercules and IBM MDPA</option>
                            <option value="olivetti">Olivetti M24 and AT&amp;T 6300</option>
                            <option value="vga">IBM VGA</option>
                            <option value="wyse-serif">Wyse WY-700 serif</option>
                            <option value="wyse-sans">Wyse WY-700 sans serif</option>
                        </select>
                    </fieldset>
                    <fieldset>
                        <legend>Speed</legend>
                        <input type="range" id="speed" value=1000 min=1 max=100000>
                        <output id="showspeed">1000</output>
                        cycles per second
                    </fieldset>
                    <fieldset>
                        <legend>Presets</legend>
                        <button type="button" onclick="loadPreset('cga');">CGA</button>
                        <button type="button" onclick="loadPreset('c64');">Commodore 64</button>
                        <button type="button" onclick="loadPreset('spectrum');">ZX Spectrum</button>
                        <button type="button" onclick="loadPreset('msx');">MSX</button>
                        <button type="button" onclick="loadPreset('cpc');">Amstrad CPC</button>
                        <button type="button" onclick="loadPreset('pcw');">Amstrad PCW</button>
                        <button type="button" onclick="loadPreset('bbc');">Acorn BBC Micro</button>
                        <button type="button" onclick="loadPreset('coco');">TRS-80 Color Computer</button>
                    </fieldset>
                </form>
            </div>
        </div>

        <div id="programs">
            <a class="tab" href="#programs">Programs</a>
            <div>
                <div id="program-list" class="floppy"></div>
            </div>
        </div>

        <div id="storage">
            <a class="tab" href="#storage">Storage</a>
            <div>
                <div id="flop1" class="floppy"></div>
            </div>
        </div>

        <div id="printer">
            <a class="tab" href="#printer">Printer</a>
            <div>
                <button onclick="printOutput();">Print now</button>
                <button onclick="clearOutput();">Clear</button>
                <pre id="printer0"></pre>
            </div>
        </div>

        <div id="listing">
            <a class="tab" href="#listing">Listing</a>
            <div>
                <textarea id="listing0" spellcheck=false></textarea>
            </div>
        </div>

        <div id="info">
            <a class="tab" href="#info">Info</a>
            <div>
                <pre id="info0"></pre>
            </div>
        </div>
    </div>

    <small>
        <a href="https://en.wikipedia.org/wiki/BASICODE">BASICODE</a> interpreter in Javascript. <noscript>Requires JavaScript.</noscript>
        Copyright (c) 2016, 2017 Rob Hagemans.
        <a href="https://github.com/robhagemans/basicode-interpreter/blob/master/LICENSE.rst">MIT licensed</a>.
        <a href="https://github.com/robhagemans/basicode-interpreter">Source</a>.
        <a href="https://github.com/robhagemans/basicode">BASICODE programs</a>.
    </small>

</body>
</html>
